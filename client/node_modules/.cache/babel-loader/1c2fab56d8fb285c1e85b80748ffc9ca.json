{"ast":null,"code":"import _slicedToArray from \"C:\\\\CAB432\\\\stocks_viewing_app\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\CAB432\\\\stocks_viewing_app\\\\client\\\\src\\\\pages\\\\Login.js\";\nimport { Switch, Route, Link, Redirect } from 'react-router-dom';\nimport React, { useEffect, useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport { Button, Badge, CardBody } from \"reactstrap\";\nimport \"ag-grid-community/dist/styles/ag-grid.css\";\nimport \"ag-grid-community/dist/styles/ag-theme-alpine.css\"; //API login url\n\nvar API_URL = \"http://localhost:443\";\nvar url = \"\".concat(API_URL, \"/user/login\"); //the token part which can be stored in localsotrage\n\nvar token = localStorage.getItem(\"token\"); //the header for authenticated requests\n\nvar headers = {\n  accept: \"aplication/json\",\n  \"Content-Type\": \"application/json\",\n  Authorization: \"Bearer \".concat(token)\n};\n/**\r\n * This is the main function which does the login functionality, \r\n * First does a post request to check information and for verification purposes. \r\n * Then displays appropriate error messages when needed. It also displays the messages\r\n * for the login page.\r\n */\n\nexport default function Login() {\n  var history = useHistory();\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      email = _useState2[0],\n      setEmail = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      password = _useState4[0],\n      setPassword = _useState4[1];\n\n  var login = false;\n  /**\r\n  * @param {event} event\r\n  * This function sends a post request to the api for login, then \r\n  * checks the returned query for errors.\r\n  * If there is error, the message will appear to the user on the screen and it will \r\n  * notify the user of the error message. \r\n  */\n\n  var logginProcess = function logginProcess(event) {\n    event.preventDefault();\n    var sendPassEmailApi = {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        email: email,\n        password: password\n      })\n    };\n    fetch(url, sendPassEmailApi).then(function (res) {\n      return res.json();\n    }).then(function (apiResponse) {\n      //if there is error notify the user\n      if (apiResponse.error) {\n        alert(apiResponse.message);\n      } //If there is not error, save the token in the local memory\n      else {\n          localStorage.getItem(\"token\", apiResponse.token);\n          console.log(\"This is response from api\" + apiResponse.token); // login = true;\n\n          history.push('/stocklist/'); //go to the restricted page\n        }\n    }).catch(function (err) {\n      alert(\"Something went wrong: \" + err.message + \" Please try again! \");\n    }); //This also catches error such as bad request\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container\",\n    style: {\n      height: \"692px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Notes, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(CardBody, {\n    className: \"container\",\n    color: \"red\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: logginProcess,\n    style: {\n      width: \"0px\",\n      height: \"0px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    style: {\n      padding: \"2px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 11\n    }\n  }, \"Email:\"), /*#__PURE__*/React.createElement(\"input\", {\n    id: \"email\",\n    type: \"text\",\n    placeholder: \"Type your email here\",\n    key: \"email\",\n    name: \"email\",\n    size: \"40\",\n    onChange: function onChange(event) {\n      setEmail(event.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    style: {\n      padding: \"2px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 11\n    }\n  }, \"Password:\"), /*#__PURE__*/React.createElement(\"input\", {\n    size: \"40\",\n    type: \"password\",\n    id: \"password\",\n    placeholder: \"Type your password here\",\n    key: \"password\",\n    name: \"password\",\n    required: true,\n    onChange: function onChange(event) {\n      setPassword(event.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 11\n    }\n  }, \"\\xA0\"), /*#__PURE__*/React.createElement(\"input\", {\n    style: {\n      color: \"red\",\n      padding: \"20px\",\n      fontSize: \"30px\",\n      fontStyle: \"bold\"\n    },\n    type: \"submit\",\n    value: \"Login\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 11\n    }\n  })))); //End of return Statement\n}\n/**\r\n * This component is for the notes on the Login page.\r\n */\n\nfunction Notes() {\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 7\n    }\n  }, \"Log in Page\"), /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 7\n    }\n  }, \"Please Log in here by typing your email and password and then pressing the Login Button below.\"));\n}","map":{"version":3,"sources":["C:/CAB432/stocks_viewing_app/client/src/pages/Login.js"],"names":["Switch","Route","Link","Redirect","React","useEffect","useState","useHistory","Button","Badge","CardBody","API_URL","url","token","localStorage","getItem","headers","accept","Authorization","Login","history","email","setEmail","password","setPassword","login","logginProcess","event","preventDefault","sendPassEmailApi","method","body","JSON","stringify","fetch","then","res","json","apiResponse","error","alert","message","console","log","push","catch","err","height","width","padding","target","value","color","fontSize","fontStyle","Notes"],"mappings":"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","sourcesContent":["import { Switch, Route,Link, Redirect } from 'react-router-dom';\r\nimport React, { useEffect, useState } from \"react\";\r\nimport  {useHistory} from \"react-router-dom\";\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport { Button, Badge, CardBody } from \"reactstrap\";\r\nimport \"ag-grid-community/dist/styles/ag-grid.css\";\r\nimport \"ag-grid-community/dist/styles/ag-theme-alpine.css\";\r\n\r\n\r\n\r\n//API login url\r\nconst API_URL = \"http://localhost:443\";\r\nconst url = `${API_URL}/user/login`;\r\n\r\n//the token part which can be stored in localsotrage\r\nconst token = localStorage.getItem(\"token\");\r\n\r\n//the header for authenticated requests\r\nconst headers = {\r\n  accept: \"aplication/json\",\r\n  \"Content-Type\": \"application/json\",\r\n  Authorization: `Bearer ${token}`\r\n}\r\n\r\n/**\r\n * This is the main function which does the login functionality, \r\n * First does a post request to check information and for verification purposes. \r\n * Then displays appropriate error messages when needed. It also displays the messages\r\n * for the login page.\r\n */\r\nexport default function Login() {\r\n  let history = useHistory();\r\n  const [email, setEmail] = useState([]);\r\n  const [password, setPassword] = useState([]);\r\n\r\n  const login = false;\r\n\r\n  /**\r\n  * @param {event} event\r\n  * This function sends a post request to the api for login, then \r\n  * checks the returned query for errors.\r\n  * If there is error, the message will appear to the user on the screen and it will \r\n  * notify the user of the error message. \r\n  */\r\n  const logginProcess = (event) => {\r\n    event.preventDefault();\r\n\r\n    const sendPassEmailApi =  {\r\n      method: \"POST\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify({ email : email, password : password })\r\n    };\r\n\r\n   fetch(url, sendPassEmailApi)\r\n   .then((res) => res.json())\r\n   .then((apiResponse) => {\r\n    \r\n    //if there is error notify the user\r\n     if(apiResponse.error){\r\n       alert(apiResponse.message);\r\n      }\r\n      //If there is not error, save the token in the local memory\r\n      else{\r\n        localStorage.getItem(\"token\", apiResponse.token);\r\n        console.log(\"This is response from api\"+apiResponse.token);\r\n        // login = true;\r\n        history.push('/stocklist/'); //go to the restricted page\r\n      }\r\n      }\r\n    ).catch(err => {alert(\"Something went wrong: \"+err.message+\" Please try again! \")}); //This also catches error such as bad request\r\n  }\r\n  \r\n  return(\r\n    <div className=\"container\" style={{height: \"692px\"}} >\r\n      \r\n      {/* Displays instructional messages on the screen */}\r\n      <Notes />\r\n\r\n      {/* This is card which holds the input and lables for the registration page */}\r\n      <CardBody className=\"container\" color=\"red\">\r\n\r\n        <form \r\n        onSubmit={logginProcess} \r\n        style={{width: \"0px\", height: \"0px\"}}\r\n        >\r\n                    \r\n          {/* This is the input and label for the email on the login page. */}\r\n          <label style={{padding: \"2px\"}}>Email:</label>\r\n          <input\r\n          id=\"email\" \r\n          type=\"text\"\r\n          placeholder=\"Type your email here\"  \r\n          key=\"email\" \r\n          name=\"email\" \r\n          size=\"40\"  \r\n          onChange={(event) => {\r\n          setEmail(event.target.value);}} />\r\n\r\n          {/* This is the input and label for the password on the registration page. */}\r\n          <label style={{padding: \"2px\"}}>Password:</label>\r\n          <input \r\n          size=\"40\"\r\n          type=\"password\" \r\n          id=\"password\" \r\n          placeholder=\"Type your password here\"\r\n          key=\"password\" \r\n          name=\"password\" \r\n          required onChange={event => {\r\n            setPassword(event.target.value);\r\n          }} />\r\n              \r\n          <p>&nbsp;</p>\r\n          {/* This is the input and label for the submit which is\r\n           used as button on the registration page. */}\r\n          <input \r\n          style={{color: \"red\", padding: \"20px\", fontSize: \"30px\", \r\n          fontStyle: \"bold\"}} \r\n          type=\"submit\" \r\n          value=\"Login\" />\r\n\r\n        </form>\r\n      </CardBody>\r\n    </div>\r\n  );\r\n  //End of return Statement\r\n}\r\n\r\n\r\n/**\r\n * This component is for the notes on the Login page.\r\n */\r\nfunction Notes(){\r\n  return(\r\n    <div>\r\n      <h1>Log in Page</h1>\r\n      <h3>Please Log in here by typing your email and password and \r\n        then pressing the Login Button below.\r\n      </h3>\r\n    </div>\r\n  );\r\n}\r\n\r\n"]},"metadata":{},"sourceType":"module"}